# 本质

平面几何问题求解中，增加辅助线的动作，本质上可分为：

- 连接实体 (尤其是point，不增加度量或结构信息)
- 等分度量信息 (尤其是线段 一般不超过三等分，产生新的度量信息)
- 特殊构图 (例如平行、垂直、圆、切线，产生新的位置、结构的关系)

# 基本步骤

- 第零步：产生一个目标（当前解题需要应用什么定理？创造什么条件？等等）
- 第一步：只产生点（实体）
- 第二步：产生他们之间的关系
- 第三步：尝试继续解题（应用定理）

## 步骤分析

解决辅助构造问题，在基本构图的基础之上，也需要结合解题来同步进行。因为我们回顾解决几何问题的过程，如果需要增加辅助线/条件/结构，一般是因为解题中需要应用定理，或者需要“创造某些条件”。

也就是说，如果我们需要进行辅助构造，往往会有一个目标，而不完全是漫无目的地增加一些实体。所谓的那些”无穷无尽的“分支节点，常常会急剧地收束到我们需要达成的目标之上。当然，这也是为什么我们需要一个构造目标的原因。此处所说的“目标”，可以非常之多，因为定理的选择是动态的，解题过程中，各个时刻已知条件的情况也是不断变化的。

- 俯视来看，在解题时，我们需要达成某些目标，而缺少某些条件。那么，没有条件就要“创造”条件。
- 仰视来看，根据已有的基础条件，通过弥补所有缺少的基础条件，提供足够的结构信息，从而得以应用高层的定理，继续求解问题。

所以在步骤之中，个人认为第零步是必须完成的、或者说必须存在的。因为如果没有所谓的目标，那么构造辅助线是无从谈起的。辅助本身，需要辅以一个目的、一个想法、一次尝试、一类概念、一种结构。

其次，第一步和第二步或许大部分时候是同步进行的，因为我们一旦要服务于某一个目标，那么实体和关系就会自然产生。或者说，在有了一个需要满足的目标之后，我们需要做的就是尽己所能去满足这个目标（缺口）。采用的方法、选择的路径可以很多，但总的来说，这就是这一步应该做的事。

## 定理生成 / 选择

在解题过程中定理的生成上，我们或许也需要增加一些信息。在进行定理选择的过程中，还需要让模型”习惯于“产生一个伴生的概念，或者我们需要尝试描述它的”选择“包含着某些目的。

这种概念用于描述一种隐含的信息，这种信息表示：定理填补了目前已知条件的某种空白。而正因为填补了空白，几何题目也被逐渐攻破。（从这个意义上，maybe 构造辅助线也是一种定理）

- 应用定理 → 填补空白
- 直接填补空白 → 应用定理

## 度量信息

在度量信息上，也需要有逻辑地增加。

低层次地，我们需要对已经存在的实体，进行具体的描述。几个点之间的位置如何排布？已有结构约束的图形是否存在更加精确的测度？等等

中层次地，我们需要利用已经存在的拓扑结构、或者已经应用的定理，准确地描述度量信息。使用勾股定理的角度应该呈多少度？对等角、同位角之间的关系所导致的角度应该是多少？等等

高层次地，我们需要测度信息服务于辅助构造。比如构造等腰结构、根据某点构造切圆、最简单的中点、潜在满足勾股定理的线段等等，它们是可以反向服务于辅助构造的。或者说，我们用代数，描述了抽象的结构。

当然，更重要的是生成描述几何结构的拓扑信息。而为何我们可以直接生成这种信息，也正是因为模型所使用的形式化环境，可以轻松、准确地表达这种信息。同时，我们也可以发现，或许可以使用本身具有拓扑结构的”图“来进行生成。(hard)

# 辅助构造定义

>raw

对于 $t$ 时刻(步)，已知的构图结构，记为 $C_t$ ，意为：Construction at time step t。需要采用的定理记为 $T_t^{att}$ ，意为：Theorem attempted at time step t。

其中，所有已知的构图信息（已知条件集合），可以描述为一个构图基元所组成的集合：

$$
C_t = \{ c_0, \dots, c_n \}
$$

对于每一个定理，在它们的前提当中，都定义了必要的前提条件，记为 $P_T^i$ ，意为：the i-th Premise set for Theorem T。由于一条定理可以满足的前提有多个，所以记为第 $i$ 个。前提常常表示为多个前提基元的集合：

$$
P^i_T = \{ p_0, \dots, p_n \}
$$

对于 $t$ 时刻，需要采取的动作往往通过需要采用的定理（目标的具象表述）得到，也就是 $P_T^i$ 。从而，对于 $t$ 时刻的目标，已知需要采用定理的情况下，也同样可以定义为一组前提基元的集合：

$$
C_t^{att} = \{ c_0^{att}, \dots, c_n^{att} \}, c_i^{att} \in P_T^i
$$

由于采用了统一的形式化系统，对于构图的描述是相同的，因而存在：

$$
c_i^{att} = c_j, \ c_j \in C_t \ \text {and} \ i,j \ge 0
$$

但是两个集合却不完全相同，因为若相同则可以继续解题。所以，在 $t$ 时刻，目标前提与当前已知前提的严格增量（相对补集），即是当前辅助动作需要完全弥补的部分。记为：

$$
C_t^* = C_t^{att} - \left ( C_t^{att} \cap C_t \right )
$$

从而，我们可以定义 $t$ 时刻需要采取的辅助动作：

$$
A_t = \text {max} \  E[ P(\alpha | C_t^*) ]
$$

其中，$\alpha$ 表示构造辅助动作序列，$P(\alpha)$ 表示所有能够填补已知条件空白的、辅助动作的概率密度函数。我们需要让当前辅助构造的”效率“最大化，也就是最大化 $t$ 时刻辅助动作的期望，从而根据已有的已知条件，最快、最好地填补当前已知条件的空缺。最后，$A_t$ 是使得解题成功继续的辅助构造动作。

此时，模型需要学习的，是如何通过当前的所有已知状态，以最有效率的方式，满足我们需要的目标已知条件。这个“满足”的过程，可以是一个已知条件的序列，因为辅助动作本身，是在创造新的已知条件。

## 动作空间

根据某种条件描述，进行构造动作：

- 增加实体
- 增加关系
- 增加度量

## 交互环境

- Formal-Geo 环境，完成基本的检查
- 构造目标描述
- 是否完成目标（奖励信息）

## 难点

- 出现新的点 (实体)
- 不出现新的点 (连接信息、度量信息)
	- 可能产生新的实体
- 如何判断此时需要进行辅助构造

# 新的(动态)构图方法

>待定...

构图：三个点一组

感觉可以借鉴一下AG中所使用的、几何专用的形式化语言，因为其可能满足某些特性，可以非常有效地超巨量生成。
